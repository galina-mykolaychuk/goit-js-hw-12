{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45077821-aa67b100696f1310c7d1f60f1';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Fetching images failed:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const imageCards = images.map(image => createImageCard(image)).join('');\n  gallery.insertAdjacentHTML('beforeend', imageCards);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n}\n\nexport function createImageCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <div class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"360\" height=\"152\" />\n      </a>\n      <div class=\"info\">\n        <ul class=\"descr-list\">\n          <li><h2 class=\"title\">Likes:</h2><p class=\"text\">${likes}</p></li>\n          <li><h2 class=\"title\">Views:</h2><p class=\"text\">${views}</p></li>\n          <li><h2 class=\"title\">Comments:</h2><p class=\"text\">${comments}</p></li>\n          <li><h2 class=\"title\">Downloads:</h2><p class=\"text\">${downloads}</p></li>\n        </ul>\n      </div>\n    </div>\n  `;\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'bottomRight',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  showMessage,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\ndocument.querySelector('#search-form').addEventListener('submit', async e => {\n  e.preventDefault();\n\n  currentQuery = e.currentTarget.elements.searchQuery.value.trim();\n\n  if (currentQuery === '') {\n    showMessage('Please enter a search query');\n    return;\n  }\n\n  currentPage = 1;\n  clearGallery();\n  document.querySelector('.loader-text').style.display = 'block';\n  document.querySelector('.load-more').style.display = 'none';\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    if (data.hits.length === 0) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n    } else {\n      renderGallery(data.hits);\n      if (data.totalHits > 15) {\n        document.querySelector('.load-more').style.display = 'block';\n      }\n    }\n  } catch (error) {\n    showMessage('Something went wrong. Please try again later.');\n  } finally {\n    document.querySelector('.loader-text').style.display = 'none';\n  }\n});\n\ndocument.querySelector('.load-more').addEventListener('click', async () => {\n  currentPage += 1;\n  document.querySelector('.loader-text').style.display = 'block';\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderGallery(data.hits);\n    if (currentPage * 15 >= data.totalHits) {\n      document.querySelector('.load-more').style.display = 'none';\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    showMessage('Something went wrong. Please try again later.');\n  } finally {\n    document.querySelector('.loader-text').style.display = 'none';\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","lightbox","renderGallery","images","gallery","imageCards","image","createImageCard","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showMessage","message","iziToast","currentPage","currentQuery","e","data"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAE1F,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACP,CACH,CCZA,IAAIC,EAEG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAaF,EAAO,IAAIG,GAASC,EAAgBD,CAAK,CAAC,EAAE,KAAK,EAAE,EACtEF,EAAQ,mBAAmB,YAAaC,CAAU,EAE9CJ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIO,EAAe,YAAY,CAE9C,CAEO,SAASD,EAAgB,CAC9B,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA,iBAEQL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,6DAIeC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,GAK1E,CAEO,SAASC,GAAe,CAC7B,MAAMZ,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,CAEO,SAASa,EAAYC,EAAS,CACnCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,aACd,CAAG,CACH,CC/CA,IAAIE,EAAc,EACdC,EAAe,GAEnB,SAAS,cAAc,cAAc,EAAE,iBAAiB,SAAU,MAAMC,GAAK,CAK3E,GAJAA,EAAE,eAAc,EAEhBD,EAAeC,EAAE,cAAc,SAAS,YAAY,MAAM,OAEtDD,IAAiB,GAAI,CACvBJ,EAAY,6BAA6B,EACzC,MACD,CAEDG,EAAc,EACdJ,IACA,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,QACvD,SAAS,cAAc,YAAY,EAAE,MAAM,QAAU,OAErD,GAAI,CACF,MAAMO,EAAO,MAAM7B,EAAY2B,EAAcD,CAAW,EACpDG,EAAK,KAAK,SAAW,EACvBN,EACE,2EACR,GAEMf,EAAcqB,EAAK,IAAI,EACnBA,EAAK,UAAY,KACnB,SAAS,cAAc,YAAY,EAAE,MAAM,QAAU,SAG1D,MAAe,CACdN,EAAY,+CAA+C,CAC/D,QAAY,CACR,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,MACxD,CACH,CAAC,EAED,SAAS,cAAc,YAAY,EAAE,iBAAiB,QAAS,SAAY,CACzEG,GAAe,EACf,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,QAEvD,GAAI,CACF,MAAMG,EAAO,MAAM7B,EAAY2B,EAAcD,CAAW,EACxDlB,EAAcqB,EAAK,IAAI,EACnBH,EAAc,IAAMG,EAAK,YAC3B,SAAS,cAAc,YAAY,EAAE,MAAM,QAAU,OACrDN,EAAY,4DAA4D,EAE3E,MAAe,CACdA,EAAY,+CAA+C,CAC/D,QAAY,CACR,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,MACxD,CACH,CAAC"}